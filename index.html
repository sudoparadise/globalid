<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AAMVA v10 Generator - Validated Full Form</title>
  <style>
    body { font-family: sans-serif; background:#f6f8fa; padding:2em; }
    label { display:inline-block; width:170px; margin-top:.4em; }
    fieldset { border:1px solid #ccc; padding:1em; margin-bottom:1.5em; }
    legend { font-size:1em; font-weight:bold;}
    .row {margin-bottom:0.5em;}
    #advancedFields { display:none; }
    .toggle { margin-bottom:1.3em; }
    input:invalid, select:invalid { border: 1px solid red; }
  </style>
</head>
<body>
  <h1>AAMVA v10 Generator Demo</h1>
  <div class="toggle">
    <input type="checkbox" id="toggleAdv" onchange="document.getElementById('advancedFields').style.display = this.checked ? 'block':'none';">
    <label for="toggleAdv" style="width:auto;">Show Advanced Fields</label>
  </div>
  <form id="dlForm" autocomplete="off" novalidate>
    <fieldset>
      <legend>Basic Information</legend>
      <div class="row">
        <label for="state">State:</label>
        <select id="state" required>
          <option value="">Select State</option>
          <option value="ALABAMA">Alabama</option>
          <option value="ALASKA">Alaska</option>
          <option value="ARIZONA">Arizona</option>
          <option value="ARKANSAS">Arkansas</option>
          <option value="CALIFORNIA">California</option>
          <option value="COLORADO">Colorado</option>
          <option value="CONNECTICUT">Connecticut</option>
          <option value="DELAWARE">Delaware</option>
          <option value="FLORIDA">Florida</option>
          <option value="GEORGIA">Georgia</option>
          <option value="HAWAII">Hawaii</option>
          <option value="IDAHO">Idaho</option>
          <option value="ILLINOIS">Illinois</option>
          <option value="INDIANA">Indiana</option>
          <option value="IOWA">Iowa</option>
          <option value="KANSAS">Kansas</option>
          <option value="KENTUCKY">Kentucky</option>
          <option value="LOUISIANA">Louisiana</option>
          <option value="MAINE">Maine</option>
          <option value="MARYLAND">Maryland</option>
          <option value="MASSACHUSETTS">Massachusetts</option>
          <option value="MICHIGAN">Michigan</option>
          <option value="MINNESOTA">Minnesota</option>
          <option value="MISSISSIPPI">Mississippi</option>
          <option value="MISSOURI">Missouri</option>
          <option value="MONTANA">Montana</option>
          <option value="NEBRASKA">Nebraska</option>
          <option value="NEVADA">Nevada</option>
          <option value="NEW_HAMPSHIRE">New Hampshire</option>
          <option value="NEW_JERSEY">New Jersey</option>
          <option value="NEW_MEXICO">New Mexico</option>
          <option value="NEW_YORK">New York</option>
          <option value="NORTH_CAROLINA">North Carolina</option>
          <option value="NORTH_DAKOTA">North Dakota</option>
          <option value="OHIO">Ohio</option>
          <option value="OKLAHOMA">Oklahoma</option>
          <option value="OREGON">Oregon</option>
          <option value="PENNSYLVANIA">Pennsylvania</option>
          <option value="RHODE_ISLAND">Rhode Island</option>
          <option value="SOUTH_CAROLINA">South Carolina</option>
          <option value="SOUTH_DAKOTA">South Dakota</option>
          <option value="TENNESSEE">Tennessee</option>
          <option value="TEXAS">Texas</option>
          <option value="UTAH">Utah</option>
          <option value="VERMONT">Vermont</option>
          <option value="VIRGINIA">Virginia</option>
          <option value="WASHINGTON">Washington</option>
          <option value="WEST_VIRGINIA">West Virginia</option>
          <option value="WISCONSIN">Wisconsin</option>
          <option value="WYOMING">Wyoming</option>
          <option value="DISTRICT_OF_COLUMBIA">District of Columbia</option>
        </select>
      </div>
      <div class="row">
        <label for="dca">License Class (DCA):</label>
        <select id="dca" required>
          <option value="">Select Class</option>
          <option value="A">A</option>
          <option value="B">B</option>
          <option value="C">C</option>
          <option value="D">D</option>
          <option value="M">M</option>
        </select>
      </div>
      <div class="row">
        <label for="dcs">Last Name (DCS):</label>
        <input type="text" id="dcs" required pattern="[A-Za-z '-]{2,40}">
      </div>
      <div class="row">
        <label for="dct">First Name (DCT):</label>
        <input type="text" id="dct" required pattern="[A-Za-z '-]{2,40}">
      </div>
      <div class="row">
        <label for="dbb">DOB MMDDYYYY (DBB):</label>
        <input type="text" id="dbb" required placeholder="MMDDYYYY" maxlength="8" pattern="\d{8}">
      </div>
      <div class="row">
        <label for="dbd">Issue MMDDYYYY (DBD):</label>
        <input type="text" id="dbd" required placeholder="MMDDYYYY" maxlength="8" pattern="\d{8}">
      </div>
      <div class="row">
        <label for="dba">Expiry MMDDYYYY (DBA):</label>
        <input type="text" id="dba" required placeholder="MMDDYYYY" maxlength="8" pattern="\d{8}">
      </div>
      <div class="row">
        <label for="daq">DL Number (DAQ):</label>
        <input type="text" id="daq" required pattern="[A-Za-z0-9]{4,20}">
      </div>
      <div class="row">
        <label for="dbc">Gender (DBC):</label>
        <select id="dbc" required>
          <option value="">Select</option>
          <option value="1">Male</option>
          <option value="2">Female</option>
          <option value="9">Other/Non-binary</option>
        </select>
      </div>
      <div class="row">
        <label for="day">Eye Color (DAY):</label>
        <select id="day" required>
          <option value="">Select</option>
          <option value="BLK">Black</option>
          <option value="BLU">Blue</option>
          <option value="BRO">Brown</option>
          <option value="GRY">Gray</option>
          <option value="GRN">Green</option>
          <option value="HAZ">Hazel</option>
          <option value="MAR">Maroon</option>
          <option value="PNK">Pink</option>
          <option value="UNK">Unknown</option>
          <option value="DIC">Dichromatic</option>
        </select>
      </div>
      <div class="row">
        <label for="dau">Height Inches (DAU):</label>
        <input type="number" id="dau" required min="36" max="90">
      </div>
      <div class="row">
        <label for="dag">Street (DAG):</label>
        <input type="text" id="dag" required pattern=".{2,50}">
      </div>
      <div class="row">
        <label for="dai">City (DAI):</label>
        <input type="text" id="dai" required pattern=".{2,30}">
      </div>
      <div class="row">
        <label for="daj">State Abbr (DAJ):</label>
        <input type="text" id="daj" required pattern="^[A-Z]{2}$" placeholder="e.g., TX">
      </div>
      <div class="row">
        <label for="dak">Zip Code (DAK):</label>
        <input type="text" id="dak" required pattern="^\d{5}$">
      </div>
    </fieldset>
    <fieldset id="advancedFields">
      <legend>Advanced/Optional Fields</legend>
      <!-- Repeat structure for as many advanced fields as desired, updating IDs/names/patterns as needed. -->
      <div class="row">
        <label for="dcb">Jurisdiction Restr. (DCB):</label>
        <input type="text" id="dcb" pattern="[A-Za-z0-9, -]{0,30}">
      </div>
      <div class="row">
        <label for="dcd">Duplicate Indicator (DCD):</label>
        <input type="text" id="dcd" pattern="[A-Za-z0-9]{0,10}">
      </div>
      <div class="row">
        <label for="dcg">Country ID (DCG):</label>
        <input type="text" id="dcg" pattern="[A-Z]{3}">
      </div>
      <div class="row">
        <label for="daa">Full Name (DAA):</label>
        <input type="text" id="daa" pattern=".{0,60}">
      </div>
      <div class="row">
        <label for="dcf">Doc Discriminator (DCF):</label>
        <input type="text" id="dcf" pattern=".{0,20}">
      </div>
      <div class="row">
        <label for="dch">Fed Compliance (DCH):</label>
        <input type="text" id="dch" pattern=".{0,20}">
      </div>
      <div class="row">
        <label for="daw">Weight lbs (DAW):</label>
        <input type="number" id="daw" min="70" max="350">
      </div>
      <div class="row">
        <label for="daz">Hair Color (DAZ):</label>
        <select id="daz">
          <option value=""></option>
          <option value="BAL">Bald</option>
          <option value="BLK">Black</option>
          <option value="BLN">Blond</option>
          <option value="BRO">Brown</option>
          <option value="GRY">Gray</option>
          <option value="RED">Red</option>
          <option value="SDY">Sandy</option>
          <option value="WHI">White</option>
        </select>
      </div>
      <div class="row">
        <label for="dbk">SSN (DBK):</label>
        <input type="text" id="dbk" pattern=".{0,11}">
      </div>
      <div class="row">
        <label for="dcl">Race/Ethnicity (DCL):</label>
        <input type="text" id="dcl" pattern=".{0,20}">
      </div>
      <div class="row">
        <label for="dcm">Congenital Disability (DCM):</label>
        <input type="text" id="dcm" pattern=".{0,25}">
      </div>
      <div class="row">
        <label for="ddv">Doc Exp Month (DDV):</label>
        <input type="text" id="ddv" pattern="^\d{2}$">
      </div>
    </fieldset>
    <button type="button" onclick="generateDL()">Generate DL Payload</button>
  </form>
  <pre id="output"></pre>
  <script>
    // MMDDYYYY format strict validation
    function validUSDate(str) {
      if (!/^\d{8}$/.test(str)) return false;
      const mm = parseInt(str.slice(0,2),10), dd = parseInt(str.slice(2,4),10), yyyy = parseInt(str.slice(4,8),10);
      if (mm < 1 || mm > 12 || dd < 1 || dd > 31 || yyyy < 1900 || yyyy > 2100) return false;
      return true;
    }
    function validateAll() {
      let errors = [];
      // required values from main form
      const f = id => document.getElementById(id);
      if(!f('state').value) errors.push('State required.');
      if(!f('dcs').value.match(/[A-Za-z '-]{2,40}/)) errors.push('Last Name invalid.');
      if(!f('dct').value.match(/[A-Za-z '-]{2,40}/)) errors.push('First Name invalid.');
      if(!f('daq').value.match(/[A-Za-z0-9]{4,20}/)) errors.push('DL Number invalid.');
      if(!f('dca').value) errors.push('License Class required.');
      if(!f('dbc').value) errors.push('Gender required.');
      if(!f('day').value) errors.push('Eye color required.');
      if(!f('dag').value.match(/.{2,50}/)) errors.push('Street required.');
      if(!f('dai').value.match(/.{2,30}/)) errors.push('City required.');
      if(!f('daj').value.match(/^[A-Z]{2}$/)) errors.push('State abbr required.');
      if(!f('dak').value.match(/^\d{5}$/)) errors.push('Zip required.');
      if(f('dau').value<36||f('dau').value>90) errors.push('Height 36-90 inches.');
      // dates
      ['dbb','dbd','dba'].forEach(function(x){
        if(!validUSDate(f(x).value)) errors.push(x.toUpperCase()+' must be MMDDYYYY');
      });
      // advanced only if displayed
      if(document.getElementById('advancedFields').style.display==='block'){
        if(f('dcb').value && !f('dcb').value.match(/[A-Za-z0-9, -]{0,30}/)) errors.push('Jurisdiction Restr. invalid.');
        if(f('dcd').value && !f('dcd').value.match(/[A-Za-z0-9]{0,10}/)) errors.push('Duplicate Indicator invalid.');
        if(f('dcg').value && !f('dcg').value.match(/^[A-Z]{3}$/)) errors.push('Country ID = 3 letters.');
        if(f('daa').value && !f('daa').value.match(/.{1,60}/)) errors.push('Full Name too long.');
        if(f('dcf').value && !f('dcf').value.match(/.{0,20}/)) errors.push('Doc Discriminator invalid.');
        if(f('dch').value && !f('dch').value.match(/.{0,20}/)) errors.push('Fed Compliance invalid.');
        if(f('daw').value && (f('daw').value<70 || f('daw').value>350)) errors.push('Weight (70-350 lbs).');
        if(f('dbk').value && !f('dbk').value.match(/.{4,11}/)) errors.push('SSN invalid.');
        if(f('dcl').value && !f('dcl').value.match(/.{0,20}/)) errors.push('Race/Ethnicity invalid.');
        if(f('dcm').value && !f('dcm').value.match(/.{0,25}/)) errors.push('Disability invalid.');
        if(f('ddv').value && !f('ddv').value.match(/^\d{2}$/)) errors.push('Doc Exp Month = 2 digits.');
      }
      return errors;
    }
    function generateDL() {
      const errors = validateAll();
      if (errors.length) {
        alert(errors.join('\n'));
        return;
      }
      // Replace with your AAMVA encoder or builder function here
      // This is just demo serialization:
      const out={};
      document.querySelectorAll('input,select').forEach(x=>out[x.id]=x.value);
      document.getElementById('output').textContent=JSON.stringify(out,null,2);
    }
  </script>
</body>
</html>
